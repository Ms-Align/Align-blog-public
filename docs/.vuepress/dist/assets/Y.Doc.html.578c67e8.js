import{_ as s,r as a,o as r,c,b as o,d,w as p,a as e,e as n}from"./app.544e4f17.js";const i={},l=e(`<h1 id="y-doc" tabindex="-1"><a class="header-anchor" href="#y-doc" aria-hidden="true">#</a> Y.Doc</h1><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">Y</span> <span class="token keyword">from</span> <span class="token string">&#39;yjs&#39;</span>

<span class="token keyword">const</span> doc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Y<span class="token punctuation">.</span>Doc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="y-doc-api" tabindex="-1"><a class="header-anchor" href="#y-doc-api" aria-hidden="true">#</a> Y.Doc API</h2><p><strong>doc.clientID: number</strong> (readonly)</p><p>\u4F1A\u8BDD\u4E0B\u6807\u8BC6\u5BA2\u6237\u7AEF\u7684\u552F\u4E00id\uFF0C\u8BF7\u52FF\u8DE8\u4F1A\u8BDD\u91CD\u590D\u4F7F\u7528\u3002\u5B98\u65B9\u7684\u89E3\u91CA\u662F\u54EA\u6015\u662F\u5355\u4E2A\u7528\u6237\u4E5F\u6709\u53EF\u80FD\u591A\u5F00\u7F16\u8F91\u9875\u9762\uFF0C\u6240\u4EE5\u8FD9\u4E9B\u62E5\u6709\u540C\u6837\u7528\u6237\u8EAB\u4EFD\u7684\u4F1A\u8BDD\u5E94\u5F53\u6709\u4E0D\u540C\u7684id\u7528\u4F5C\u533A\u5206\uFF0C\u5426\u5219\u53EF\u80FD\u4EA7\u751F\u65E0\u6CD5\u6062\u590D\u7684\u4FEE\u6539\u751A\u81F3\u635F\u574F\u3002 <a href="https://docs.yjs.dev/api/faq#i-get-a-new-clientid-for-every-session-is-there-a-way-to-make-it-static-for-a-peer-accessing-the-document" target="_blank" rel="noopener noreferrer">FAQ</a></p><p><strong>doc.gc: boolean</strong></p><p>\u662F\u5426\u5BF9\u5F53\u524D\u6587\u4EF6\u5B9E\u4F8B\u542F\u7528\u5783\u573E\u56DE\u6536\u3002\u8BBE\u4E3Afalse\u65E7\u7684\u6587\u4EF6\u5185\u5BB9\u5C06\u4E0D\u4F1A\u88AB\u56DE\u6536\u4E14\u53EF\u6062\u590D\u3002<a href="https://docs.yjs.dev/api/internals" target="_blank" rel="noopener noreferrer">\u5173\u4E8E\u5783\u573E\u56DE\u6536</a></p><p><strong>doc.transact(function(Transaction): void [, origin:any])</strong></p>`,8),g=n("\u53D1\u8D77\u4E8B\u52A1\uFF0C\u4E8B\u52A1\u7684\u6982\u5FF5"),u=n("\u4E4B\u524D"),h=n("\u6709\u63D0\u5230\u3002\u5E76\u4E14\u53EF\u4EE5\u6DFB\u52A0origin\u53C2\u6570\uFF0C\u8FD9\u4E2A\u53C2\u6570\u503C\u53EF\u4EE5\u901A\u8FC7"),f=o("code",null,"transaction.origin",-1),y=n("\u548C\u4E8B\u4EF6\u76D1\u542C\u51FD\u6570"),v=o("code",null,"on('update', (update, origin) => ..)",-1),_=n("\u7684\u65B9\u5F0F\u8BBF\u95EE\u5230\u3002"),m=e('<p><strong>doc.get(string, Y.[TypeClass]): [Type]</strong></p><p>\u83B7\u53D6\u9876\u5C42\u5171\u4EAB\u7C7B\u578B</p><p><strong>doc.getArray(string = &#39;&#39;): Y.Array</strong></p><p>\u5B9A\u4E49\u4E00\u4E2A\u5171\u4EAB\u7C7B\u578BY.Array\uFF0C\u7B49\u540C\u4E8E<code>y.get(string, Y.Array)</code></p><p><strong>doc.getMap(string = &#39;&#39;): Y.Map</strong></p><p>\u5B9A\u4E49\u4E00\u4E2A\u5171\u4EAB\u7C7B\u578BY.Map\uFF0C\u7B49\u540C\u4E8E<code>y.get(string, Y.Map)</code></p><p><strong>doc.getXmlFragment(string = &#39;&#39;): Y.XmlFragment</strong></p><p>\u5B9A\u4E49\u4E00\u4E2A\u5171\u4EAB\u7C7B\u578BY.XmlFragment,\u7B49\u540C\u4E8E<code>y.get(string, Y.XmlFragment)</code></p><p><strong>doc.destroy()</strong></p><p>\u9500\u6BC1\u6B64 Y.Doc \u5B9E\u4F8B\u3002 \u6240\u6709\u4E8B\u4EF6\u5904\u7406\u7A0B\u5E8F\u90FD\u4F1A\u88AB\u6E05\u9664\uFF0C\u5E76\u4E14\u5185\u5BB9\u4E5F\u4F1A\u4ECE\u5185\u5B58\u4E2D\u6E05\u9664\uFF0C\u9664\u975E\u4ECD\u5728\u5F15\u7528\u5B83\u3002 \u9644\u52A0\u5230\u6B64\u6587\u6863\u7684\u7ED1\u5B9A\u548C\u63D0\u4F9B\u7A0B\u5E8F\u4E5F\u4F1A\u88AB\u9500\u6BC1\u3002</p><p><strong>doc.on(eventName: string, function(event))</strong></p><p>\u81EA\u5B9A\u4E49\u4E8B\u4EF6</p><p><strong>doc.once(eventName: string, function(event))</strong></p><p>\u81EA\u5B9A\u4E49\u53EA\u6267\u884C\u4E00\u6B21\u7684\u4E8B\u4EF6</p><p><strong>doc.off(eventName: string, function(event))</strong></p><p>\u6CE8\u9500\u81EA\u5B9A\u4E49\u4E8B\u4EF6</p><h2 id="\u4E8B\u4EF6\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#\u4E8B\u4EF6\u7C7B\u578B" aria-hidden="true">#</a> \u4E8B\u4EF6\u7C7B\u578B</h2><p><strong>doc.on(&#39;beforeTransaction&#39;, function(tr: Transaction, doc: Y.Doc))</strong></p><p>\u6BCF\u6B21\u4E8B\u52A1\u6267\u884C\u524D\u89E6\u53D1</p><p><strong>doc.on(&#39;beforeObserverCalls&#39;, function(tr: Transaction, doc: Y.Doc))</strong></p><p>\u5728\u5171\u4EAB\u7C7B\u578B\u4E0A\u5B9A\u4E49\u7684\u4E8B\u4EF6\u76D1\u542C\u89E6\u53D1\u524D\u8C03\u7528</p><p><strong>doc.on(&#39;afterTransaction&#39;, function(tr: Transaction, doc: Y.Doc))</strong></p><p>\u4E8B\u52A1\u6267\u884C\u540E\u8C03\u7528</p><p><strong>doc.on(&#39;update&#39;, function(update: Uint8Array, origin: any, doc: Y.Doc, tr: Transaction))</strong></p><p>\u6536\u5230\u66F4\u65B0\u6D88\u606F\u65F6</p><p><strong>doc.on(&#39;updateV2&#39;, function(update: Uint8Array, origin: any, doc: Y.Doc, tr: Transaction))</strong></p><p>\u6536\u5230\u66F4\u65B0\u6D88\u606F\u65F6(\u5B9E\u9A8C\u4E2D\u7684\u4E8B\u4EF6\uFF0C\u5B98\u65B9\u63CF\u8FF0\u901F\u5EA6\u6BD4\u539F\u6765\u7684\u5FEB\u5341\u500D)</p><p><strong>doc.on(&#39;subdocs&#39;, function(changes: { loaded: Set&lt;Y.Doc&gt;, added: Set&lt;Y.Doc&gt;, removed: Set&lt;Y.Doc&gt; }))</strong></p><p>\u52A0\u8F7D\u5B50\u6587\u6863\u6216\u6DFB\u52A0\u5220\u9664\u5B50\u6587\u6863\u65F6\u4F1A\u89E6\u53D1\u3002</p><p><strong>doc.on(&#39;destroy&#39;, function(doc: Y.Doc))</strong></p><p>\u6587\u6863\u88AB\u9500\u6BC1\u65F6\u89E6\u53D1\u3002\u7ED1\u5B9A\u7684\u4E8B\u4EF6\u548C\u5176\u4ED6\u529F\u80FD\u5E94\u8BE5\u5728\u8FD9\u91CC\u89E3\u7ED1\u3002</p><h2 id="\u4E8B\u4EF6\u89E6\u53D1\u987A\u5E8F" tabindex="-1"><a class="header-anchor" href="#\u4E8B\u4EF6\u89E6\u53D1\u987A\u5E8F" aria-hidden="true">#</a> \u4E8B\u4EF6\u89E6\u53D1\u987A\u5E8F\uFF1A</h2><ul><li><code>ydoc.on(&#39;beforeTransaction&#39;, event =&gt; { .. })</code> \u4E8B\u52A1\u6267\u884C\u524D\u8C03\u7528</li><li>\u4E8B\u52A1\u5DF2\u89E6\u53D1</li><li><code>ydoc.on(&#39;beforeObserverCalls&#39;, event =&gt; {})</code>\u4E8B\u52A1\u6267\u884C\u540E\u4F46\u662F\u8FD8\u6CA1\u5F00\u59CB\u89E6\u53D1\u76D1\u542C</li><li><code>ytype.observe(event =&gt; { .. })</code> - \u76D1\u542C\u5668\u88AB\u8C03\u7528</li><li><code>ytype.observeDeep(event =&gt; { .. })</code> - \u6DF1\u5C42\u76D1\u542C\u5668\u88AB\u8C03\u7528</li><li><code>ydoc.on(&#39;afterTransaction&#39;, event =&gt; {})</code> - - \u4E8B\u52A1\u6267\u884C\u5B8C\u6210\u540E</li><li><code>ydoc.on(&#39;update&#39;, update =&gt; { .. })</code> - - \u5176\u4ED6\u5BA2\u6237\u7AEF\u4FEE\u6539\u89E6\u53D1\u7684\u66F4\u65B0\u4E8B\u4EF6</li></ul>',33);function Y(k,b){const t=a("RouterLink");return r(),c("div",null,[l,o("p",null,[g,d(t,{to:"/posts/documents/yjs.js/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html"},{default:p(()=>[u]),_:1}),h,f,y,v,_]),m])}var T=s(i,[["render",Y],["__file","Y.Doc.html.vue"]]);export{T as default};
