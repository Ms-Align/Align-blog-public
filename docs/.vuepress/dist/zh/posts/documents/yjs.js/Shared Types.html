<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="16x16" href="/img/logo/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/logo/favicon-32x32.png"><link rel="manifest" href="/manifest.webmanifest"><meta name="application-name" content="Gungnir Theme"><meta name="apple-mobile-web-app-title" content="Gungnir Theme"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/img/logo/apple-touch-icon.png"><meta name="theme-color" content="#377bb5"><meta name="msapplication-TileColor" content="#377bb5"><title>Shared Types | VuePress Theme Gungnir</title><meta name="description" content="VuePress 博客主题">
    <link rel="modulepreload" href="/assets/app.544e4f17.js"><link rel="modulepreload" href="/assets/Shared Types.html.38566ea3.js"><link rel="modulepreload" href="/assets/Shared Types.html.34d0870f.js"><link rel="prefetch" href="/assets/index.html.8e728b2b.js"><link rel="prefetch" href="/assets/Docker快速指南.html.ac905e6d.js"><link rel="prefetch" href="/assets/index.html.be8d703e.js"><link rel="prefetch" href="/assets/analytics.html.32c56d94.js"><link rel="prefetch" href="/assets/comment.html.25089074.js"><link rel="prefetch" href="/assets/hitokoto.html.6dad757a.js"><link rel="prefetch" href="/assets/icons.html.73c5e85d.js"><link rel="prefetch" href="/assets/reading-time.html.fab41476.js"><link rel="prefetch" href="/assets/rss.html.e28391d5.js"><link rel="prefetch" href="/assets/chart.html.eefb8640.js"><link rel="prefetch" href="/assets/math.html.464eda8a.js"><link rel="prefetch" href="/assets/mermaid.html.7212663d.js"><link rel="prefetch" href="/assets/others.html.8ba45ff3.js"><link rel="prefetch" href="/assets/config.html.8b6db3b0.js"><link rel="prefetch" href="/assets/content.html.ac507939.js"><link rel="prefetch" href="/assets/installation.html.f534daad.js"><link rel="prefetch" href="/assets/intro.html.a56462bf.js"><link rel="prefetch" href="/assets/search.html.59941bbf.js"><link rel="prefetch" href="/assets/baidu-tongji.html.a0ec4c3a.js"><link rel="prefetch" href="/assets/chart.html.b8831254.js"><link rel="prefetch" href="/assets/giscus.html.36fcc09c.js"><link rel="prefetch" href="/assets/intro.html.e579195f.js"><link rel="prefetch" href="/assets/katex.html.a5f86b3d.js"><link rel="prefetch" href="/assets/md-plus.html.c31b27ba.js"><link rel="prefetch" href="/assets/mermaid.html.dbcf5bfc.js"><link rel="prefetch" href="/assets/reading-time.html.12efe278.js"><link rel="prefetch" href="/assets/rss.html.ed70d280.js"><link rel="prefetch" href="/assets/Docker快速指南.html.a553c60d.js"><link rel="prefetch" href="/assets/index.html.9fa8b5bf.js"><link rel="prefetch" href="/assets/config.html.3b704857.js"><link rel="prefetch" href="/assets/content.html.4753bf58.js"><link rel="prefetch" href="/assets/installation.html.e89e9cac.js"><link rel="prefetch" href="/assets/intro.html.a29ebba3.js"><link rel="prefetch" href="/assets/search.html.f998dc7a.js"><link rel="prefetch" href="/assets/analytics.html.c5b4ca5a.js"><link rel="prefetch" href="/assets/comment.html.95c12868.js"><link rel="prefetch" href="/assets/hitokoto.html.75724958.js"><link rel="prefetch" href="/assets/icons.html.51d2fb15.js"><link rel="prefetch" href="/assets/reading-time.html.08707a39.js"><link rel="prefetch" href="/assets/rss.html.e5db539e.js"><link rel="prefetch" href="/assets/deploy.html.004cb244.js"><link rel="prefetch" href="/assets/resource.html.27d6eef8.js"><link rel="prefetch" href="/assets/chart.html.a37f0ad0.js"><link rel="prefetch" href="/assets/math.html.4553c0fc.js"><link rel="prefetch" href="/assets/mermaid.html.ea72386e.js"><link rel="prefetch" href="/assets/others.html.f912a6a6.js"><link rel="prefetch" href="/assets/backend.html.e3e32b23.js"><link rel="prefetch" href="/assets/hooks.html.06639c25.js"><link rel="prefetch" href="/assets/Monitoring State.html.da36f62b.js"><link rel="prefetch" href="/assets/index.html.96d06e5d.js"><link rel="prefetch" href="/assets/介绍.html.aaa3b026.js"><link rel="prefetch" href="/assets/概览.html.ebb98660.js"><link rel="prefetch" href="/assets/组件.html.66ed6481.js"><link rel="prefetch" href="/assets/index.html.ca184ad4.js"><link rel="prefetch" href="/assets/The sx prop.html.9ec9c1ea.js"><link rel="prefetch" href="/assets/用法.html.2a24386c.js"><link rel="prefetch" href="/assets/起步.html.38f2f5d3.js"><link rel="prefetch" href="/assets/index.html.b59f63c7.js"><link rel="prefetch" href="/assets/Delta Format.html.7d61297c.js"><link rel="prefetch" href="/assets/Document Updates.html.37a9ec78.js"><link rel="prefetch" href="/assets/index.html.9b1d906d.js"><link rel="prefetch" href="/assets/Shared Types.html.953121a6.js"><link rel="prefetch" href="/assets/y-protocol源码学习.html.d2978e18.js"><link rel="prefetch" href="/assets/y-websocket源码学习.html.6966579d.js"><link rel="prefetch" href="/assets/Y.Doc.html.5c9c389b.js"><link rel="prefetch" href="/assets/Y.Event.html.20b4d468.js"><link rel="prefetch" href="/assets/Y.UndoManager.html.4e8e2a77.js"><link rel="prefetch" href="/assets/基础概念.html.efe25383.js"><link rel="prefetch" href="/assets/网络同步.html.7b075fc2.js"><link rel="prefetch" href="/assets/baidu-tongji.html.7cd7fdc2.js"><link rel="prefetch" href="/assets/chart.html.829894df.js"><link rel="prefetch" href="/assets/giscus.html.6630bfa1.js"><link rel="prefetch" href="/assets/intro.html.9c9082c7.js"><link rel="prefetch" href="/assets/katex.html.9b98c34d.js"><link rel="prefetch" href="/assets/md-plus.html.ef8b1ddb.js"><link rel="prefetch" href="/assets/mermaid.html.2abfeafa.js"><link rel="prefetch" href="/assets/reading-time.html.94bed6ee.js"><link rel="prefetch" href="/assets/rss.html.8d94c32a.js"><link rel="prefetch" href="/assets/index.html.ba9386bb.js"><link rel="prefetch" href="/assets/The sx prop.html.5ad91fee.js"><link rel="prefetch" href="/assets/用法.html.4e134c4b.js"><link rel="prefetch" href="/assets/起步.html.a9ec1eb3.js"><link rel="prefetch" href="/assets/Delta Format.html.283ecf2c.js"><link rel="prefetch" href="/assets/Document Updates.html.73bd8ce5.js"><link rel="prefetch" href="/assets/index.html.108f738a.js"><link rel="prefetch" href="/assets/y-protocol源码学习.html.67af4840.js"><link rel="prefetch" href="/assets/y-websocket源码学习.html.430ebee8.js"><link rel="prefetch" href="/assets/Y.Doc.html.ed84e69c.js"><link rel="prefetch" href="/assets/Y.Event.html.9e13bcd8.js"><link rel="prefetch" href="/assets/Y.UndoManager.html.c735bdf9.js"><link rel="prefetch" href="/assets/基础概念.html.91d1abd6.js"><link rel="prefetch" href="/assets/网络同步.html.3cecb49d.js"><link rel="prefetch" href="/assets/backend.html.c9d776db.js"><link rel="prefetch" href="/assets/hooks.html.36146126.js"><link rel="prefetch" href="/assets/Monitoring State.html.c0c2d941.js"><link rel="prefetch" href="/assets/index.html.c2288129.js"><link rel="prefetch" href="/assets/介绍.html.4950c845.js"><link rel="prefetch" href="/assets/概览.html.6cf25757.js"><link rel="prefetch" href="/assets/组件.html.8669dbc7.js"><link rel="prefetch" href="/assets/404.html.d341cb57.js"><link rel="prefetch" href="/assets/index.html.7e9be091.js"><link rel="prefetch" href="/assets/index.html.d080f048.js"><link rel="prefetch" href="/assets/index.html.3c25d619.js"><link rel="prefetch" href="/assets/index.html.140f8688.js"><link rel="prefetch" href="/assets/index.html.fb11d93a.js"><link rel="prefetch" href="/assets/index.html.b28ff175.js"><link rel="prefetch" href="/assets/index.html.d97d7b35.js"><link rel="prefetch" href="/assets/index.html.44638413.js"><link rel="prefetch" href="/assets/index.html.d32216d6.js"><link rel="prefetch" href="/assets/index.html.305c60ac.js"><link rel="prefetch" href="/assets/Docker快速指南.html.6005227f.js"><link rel="prefetch" href="/assets/index.html.9836eebc.js"><link rel="prefetch" href="/assets/analytics.html.312671ce.js"><link rel="prefetch" href="/assets/comment.html.0e21fc9a.js"><link rel="prefetch" href="/assets/hitokoto.html.616306b3.js"><link rel="prefetch" href="/assets/icons.html.34ed8a94.js"><link rel="prefetch" href="/assets/reading-time.html.65579be9.js"><link rel="prefetch" href="/assets/rss.html.48126d45.js"><link rel="prefetch" href="/assets/chart.html.8793aee6.js"><link rel="prefetch" href="/assets/math.html.d7d51718.js"><link rel="prefetch" href="/assets/mermaid.html.61798a59.js"><link rel="prefetch" href="/assets/others.html.be3134b8.js"><link rel="prefetch" href="/assets/config.html.9c74d659.js"><link rel="prefetch" href="/assets/content.html.5ff76501.js"><link rel="prefetch" href="/assets/installation.html.05446ffa.js"><link rel="prefetch" href="/assets/intro.html.0e78233d.js"><link rel="prefetch" href="/assets/search.html.93212ed9.js"><link rel="prefetch" href="/assets/baidu-tongji.html.976c11b8.js"><link rel="prefetch" href="/assets/chart.html.029ee747.js"><link rel="prefetch" href="/assets/giscus.html.974c550f.js"><link rel="prefetch" href="/assets/intro.html.5c0ed8d2.js"><link rel="prefetch" href="/assets/katex.html.320ec9d4.js"><link rel="prefetch" href="/assets/md-plus.html.8e411251.js"><link rel="prefetch" href="/assets/mermaid.html.f1c89c8f.js"><link rel="prefetch" href="/assets/reading-time.html.ba5d87a7.js"><link rel="prefetch" href="/assets/rss.html.0399564f.js"><link rel="prefetch" href="/assets/Docker快速指南.html.e94d3a06.js"><link rel="prefetch" href="/assets/index.html.faf888e8.js"><link rel="prefetch" href="/assets/config.html.a06f98ff.js"><link rel="prefetch" href="/assets/content.html.42f97c2c.js"><link rel="prefetch" href="/assets/installation.html.a5d459a4.js"><link rel="prefetch" href="/assets/intro.html.c90e2270.js"><link rel="prefetch" href="/assets/search.html.88795650.js"><link rel="prefetch" href="/assets/analytics.html.00df7cb2.js"><link rel="prefetch" href="/assets/comment.html.62026c3c.js"><link rel="prefetch" href="/assets/hitokoto.html.56122234.js"><link rel="prefetch" href="/assets/icons.html.4cbf6940.js"><link rel="prefetch" href="/assets/reading-time.html.1005b636.js"><link rel="prefetch" href="/assets/rss.html.d740eaf9.js"><link rel="prefetch" href="/assets/deploy.html.d39fbe76.js"><link rel="prefetch" href="/assets/resource.html.ad32ba37.js"><link rel="prefetch" href="/assets/chart.html.d9259f88.js"><link rel="prefetch" href="/assets/math.html.268bab12.js"><link rel="prefetch" href="/assets/mermaid.html.305f6a68.js"><link rel="prefetch" href="/assets/others.html.3ea30c96.js"><link rel="prefetch" href="/assets/backend.html.e716e5b9.js"><link rel="prefetch" href="/assets/hooks.html.df87895c.js"><link rel="prefetch" href="/assets/Monitoring State.html.8d63d393.js"><link rel="prefetch" href="/assets/index.html.b0b6014d.js"><link rel="prefetch" href="/assets/介绍.html.d2939b96.js"><link rel="prefetch" href="/assets/概览.html.5293f564.js"><link rel="prefetch" href="/assets/组件.html.9dac5f59.js"><link rel="prefetch" href="/assets/index.html.8b7b0b84.js"><link rel="prefetch" href="/assets/The sx prop.html.c9a699eb.js"><link rel="prefetch" href="/assets/用法.html.8663a89c.js"><link rel="prefetch" href="/assets/起步.html.5a25b6a3.js"><link rel="prefetch" href="/assets/index.html.08f7cedb.js"><link rel="prefetch" href="/assets/Delta Format.html.08212c72.js"><link rel="prefetch" href="/assets/Document Updates.html.47ffcdd4.js"><link rel="prefetch" href="/assets/index.html.c1bbf76e.js"><link rel="prefetch" href="/assets/Shared Types.html.dd35a926.js"><link rel="prefetch" href="/assets/y-protocol源码学习.html.4861cf45.js"><link rel="prefetch" href="/assets/y-websocket源码学习.html.8d7a9a0e.js"><link rel="prefetch" href="/assets/Y.Doc.html.578c67e8.js"><link rel="prefetch" href="/assets/Y.Event.html.c755a69c.js"><link rel="prefetch" href="/assets/Y.UndoManager.html.6c345284.js"><link rel="prefetch" href="/assets/基础概念.html.dcc071df.js"><link rel="prefetch" href="/assets/网络同步.html.ea60430a.js"><link rel="prefetch" href="/assets/baidu-tongji.html.ca9c61e4.js"><link rel="prefetch" href="/assets/chart.html.0c30dc92.js"><link rel="prefetch" href="/assets/giscus.html.0d8cb9a5.js"><link rel="prefetch" href="/assets/intro.html.d6586be7.js"><link rel="prefetch" href="/assets/katex.html.c21ab458.js"><link rel="prefetch" href="/assets/md-plus.html.84d2e324.js"><link rel="prefetch" href="/assets/mermaid.html.e649900e.js"><link rel="prefetch" href="/assets/reading-time.html.581de004.js"><link rel="prefetch" href="/assets/rss.html.36c6c6f4.js"><link rel="prefetch" href="/assets/index.html.5ebb42eb.js"><link rel="prefetch" href="/assets/The sx prop.html.5fff5a56.js"><link rel="prefetch" href="/assets/用法.html.cfa8e110.js"><link rel="prefetch" href="/assets/起步.html.3662324d.js"><link rel="prefetch" href="/assets/Delta Format.html.ac3a65a9.js"><link rel="prefetch" href="/assets/Document Updates.html.014c20a2.js"><link rel="prefetch" href="/assets/index.html.db048a57.js"><link rel="prefetch" href="/assets/y-protocol源码学习.html.072bb841.js"><link rel="prefetch" href="/assets/y-websocket源码学习.html.48498e9a.js"><link rel="prefetch" href="/assets/Y.Doc.html.ab7592d8.js"><link rel="prefetch" href="/assets/Y.Event.html.5f100808.js"><link rel="prefetch" href="/assets/Y.UndoManager.html.64366830.js"><link rel="prefetch" href="/assets/基础概念.html.accfad33.js"><link rel="prefetch" href="/assets/网络同步.html.ddebbe3c.js"><link rel="prefetch" href="/assets/backend.html.f2044f20.js"><link rel="prefetch" href="/assets/hooks.html.b5eeed87.js"><link rel="prefetch" href="/assets/Monitoring State.html.269e6590.js"><link rel="prefetch" href="/assets/index.html.a41cc55c.js"><link rel="prefetch" href="/assets/介绍.html.7819374c.js"><link rel="prefetch" href="/assets/概览.html.3dee9e80.js"><link rel="prefetch" href="/assets/组件.html.d535a279.js"><link rel="prefetch" href="/assets/404.html.2f4e5b1f.js"><link rel="prefetch" href="/assets/index.html.f056ae31.js"><link rel="prefetch" href="/assets/index.html.01d96488.js"><link rel="prefetch" href="/assets/index.html.5fff8c0d.js"><link rel="prefetch" href="/assets/index.html.d4a516c4.js"><link rel="prefetch" href="/assets/index.html.0d249669.js"><link rel="prefetch" href="/assets/index.html.ec226aa4.js"><link rel="prefetch" href="/assets/index.html.2e8d4898.js"><link rel="prefetch" href="/assets/index.html.81a76731.js"><link rel="prefetch" href="/assets/index.html.1beacac8.js"><link rel="prefetch" href="/assets/404.f7c3bfe7.js"><link rel="prefetch" href="/assets/HomePage.23170c1d.js"><link rel="prefetch" href="/assets/Layout.600b6979.js"><link rel="prefetch" href="/assets/Links.4c6c9d46.js"><link rel="prefetch" href="/assets/Post.de319c30.js"><link rel="prefetch" href="/assets/Tags.736a7362.js">
    <link rel="stylesheet" href="/assets/style.bf1d5085.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar is-fixed is-visible invert"><span><a href="/" class=""><span class="site-name">$ cd /home/</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg></span><span>首页</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/tags/" class="" aria-label="标签"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg></span><span>标签</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/links/" class="" aria-label="链接"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg></span><span>链接</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/posts/readme.md" class="" aria-label="文章"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M20 22H4a1 1 0 01-1-1V3a1 1 0 011-1h16a1 1 0 011 1v18a1 1 0 01-1 1zm-1-2V4H5v16h14zM7 6h4v4H7V6zm0 6h10v2H7v-2zm0 4h10v2H7v-2zm6-9h4v2h-4V7z"/></svg></span><span>文章</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/docs/basic/intro.md" class="" aria-label="开发文档"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M21 18H6a1 1 0 000 2h15v2H6a3 3 0 01-3-3V4a2 2 0 012-2h16v16zm-5-9V7H8v2h8z"/></svg></span><span>开发文档</span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://v2.vuepress.vuejs.org/zh/" rel="noopener noreferrer" target="_blank" aria-label="VuePress"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M3.316 3L12 18l8.684-15H23L12 22 1 3h2.316zm4.342 0L12 10.5 16.342 3h2.316L12 14.5 5.342 3h2.316z"/></svg></span><span>VuePress</span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/></svg></span><span>选择语言</span></span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/></svg></span><span>选择语言</span></span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/posts/documents/yjs.js/Shared%20Types.html" class="" aria-label="English"><!--[--><!--]--><!----><span>English</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--><!----><span>简体中文</span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--><div class="navbar-item"><a style="cursor:pointer;"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg></span><span>搜索</span></a></div></nav><!--[--><!--]--><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M489.2 287.9h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6V146.2c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32h-36.6v-32c0-6-8-4.6-11.7-4.6v-38c8.3-2 17.1-3.4 25.7-3.4 10.9 0 20.9 4.3 31.4 4.3 4.6 0 27.7-1.1 27.7-8v-60c0-2.6-2-4.6-4.6-4.6-5.1 0-15.1 4.3-24 4.3-9.7 0-20.9-4.3-32.6-4.3-8 0-16 1.1-23.7 2.9v-4.9c5.4-2.6 9.1-8.3 9.1-14.3 0-20.7-31.4-20.8-31.4 0 0 6 3.7 11.7 9.1 14.3v111.7c-3.7 0-11.7-1.4-11.7 4.6v32h-36.6v-32c0-2.6-2-4.6-4.6-4.6h-27.4c-2.6 0-4.6 2-4.6 4.6v32H128v-32c0-2.6-2-4.6-4.6-4.6H96c-2.6 0-4.6 2-4.6 4.6v178.3H54.8v-32c0-2.6-2-4.6-4.6-4.6H22.8c-2.6 0-4.6 2-4.6 4.6V512h182.9v-96c0-72.6 109.7-72.6 109.7 0v96h182.9V292.5c.1-2.6-1.9-4.6-4.5-4.6zm-288.1-4.5c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64zm146.4 0c0 2.6-2 4.6-4.6 4.6h-27.4c-2.6 0-4.6-2-4.6-4.6v-64c0-2.6 2-4.6 4.6-4.6h27.4c2.6 0 4.6 2 4.6 4.6v64z"/></svg></span><span>首页</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/tags/" class="" aria-label="标签"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg></span><span>标签</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/links/" class="" aria-label="链接"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M305.45 462.59c7.391 7.298 6.188 20.097-3 25.004-77.714 41.802-176.726 29.91-242.344-35.709-65.602-65.603-77.51-164.523-35.692-242.331 4.891-9.095 17.69-10.298 25.003-3l116.812 116.813 27.394-27.394c-.688-2.61-1.594-5.001-1.594-7.814a32.004 32.004 0 1132.004 32.005c-2.797 0-5.204-.891-7.798-1.594l-27.41 27.41zm206.526-159.523a16.103 16.103 0 01-16.002 17.003H463.86a15.97 15.97 0 01-15.892-15.002C440.467 175.549 336.453 70.534 207.03 63.533a15.845 15.845 0 01-15.002-15.908V16.027A16.094 16.094 0 01209.03.024C372.255 8.62 503.475 139.841 511.976 303.067zm-96.012-.297a16.21 16.21 0 01-16.112 17.3h-32.207a16.069 16.069 0 01-15.893-14.705c-6.907-77.011-68.118-138.91-144.924-145.224a15.94 15.94 0 01-14.8-15.893v-32.114a16.134 16.134 0 0117.3-16.096c110.123 8.501 198.228 96.607 206.636 206.732z"/></svg></span><span>链接</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/posts/readme.md" class="" aria-label="文章"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M20 22H4a1 1 0 01-1-1V3a1 1 0 011-1h16a1 1 0 011 1v18a1 1 0 01-1 1zm-1-2V4H5v16h14zM7 6h4v4H7V6zm0 6h10v2H7v-2zm0 4h10v2H7v-2zm6-9h4v2h-4V7z"/></svg></span><span>文章</span><!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/docs/basic/intro.md" class="" aria-label="开发文档"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M21 18H6a1 1 0 000 2h15v2H6a3 3 0 01-3-3V4a2 2 0 012-2h16v16zm-5-9V7H8v2h8z"/></svg></span><span>开发文档</span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://v2.vuepress.vuejs.org/zh/" rel="noopener noreferrer" target="_blank" aria-label="VuePress"><!--[--><!--]--><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M3.316 3L12 18l8.684-15H23L12 22 1 3h2.316zm4.342 0L12 10.5 16.342 3h2.316L12 14.5 5.342 3h2.316z"/></svg></span><span>VuePress</span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="选择语言"><span class="title"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/></svg></span><span>选择语言</span></span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="选择语言"><span class="title"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/></svg></span><span>选择语言</span></span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/posts/documents/yjs.js/Shared%20Types.html" class="" aria-label="English"><!--[--><!--]--><!----><span>English</span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--><!----><span>简体中文</span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--><div class="navbar-item"><a style="cursor:pointer;"><span class="nav-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 2c4.968 0 9 4.032 9 9s-4.032 9-9 9-9-4.032-9-9 4.032-9 9-9zm0 16c3.867 0 7-3.133 7-7 0-3.868-3.133-7-7-7-3.868 0-7 3.132-7 7 0 3.867 3.132 7 7 7zm8.485.071l2.829 2.828-1.415 1.415-2.828-2.829 1.414-1.414z"/></svg></span><span>搜索</span></a></div></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">前言 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/zh/posts/" class="router-link-active sidebar-item" aria-label="前言"><!--[--><!--]--><!----><span>前言</span><!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">yjs.js <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/zh/posts/documents/yjs.js/%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5.html" class="sidebar-item" aria-label="基础概念"><!--[--><!--]--><!----><span>基础概念</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/yjs.js/%E7%BD%91%E7%BB%9C%E5%90%8C%E6%AD%A5.html" class="sidebar-item" aria-label="网络同步"><!--[--><!--]--><!----><span>网络同步</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/yjs.js/Y.Doc.html" class="sidebar-item" aria-label="Y.Doc"><!--[--><!--]--><!----><span>Y.Doc</span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Shared Types"><!--[--><!--]--><!----><span>Shared Types</span><!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#y-map" class="router-link-active router-link-exact-active sidebar-item" aria-label="Y.Map"><!--[--><!--]--><!----><span>Y.Map</span><!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#api" class="router-link-active router-link-exact-active sidebar-item" aria-label="API"><!--[--><!--]--><!----><span>API</span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#通过一个示例来了解observe的使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="通过一个示例来了解observe的使用"><!--[--><!--]--><!----><span>通过一个示例来了解observe的使用</span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#y-mapevent-api" class="router-link-active router-link-exact-active sidebar-item" aria-label="Y.MapEvent API"><!--[--><!--]--><!----><span>Y.MapEvent API</span><!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#y-array" class="router-link-active router-link-exact-active sidebar-item" aria-label="Y.Array"><!--[--><!--]--><!----><span>Y.Array</span><!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#api-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="API"><!--[--><!--]--><!----><span>API</span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#通过一个示例来了解observe的使用-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="通过一个示例来了解observe的使用"><!--[--><!--]--><!----><span>通过一个示例来了解observe的使用</span><!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#y-text" class="router-link-active router-link-exact-active sidebar-item" aria-label="Y.Text"><!--[--><!--]--><!----><span>Y.Text</span><!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#api-2" class="router-link-active router-link-exact-active sidebar-item" aria-label="API"><!--[--><!--]--><!----><span>API</span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#delta-format-delta-format-md" class="router-link-active router-link-exact-active sidebar-item" aria-label="[Delta Format](./Delta Format.md)"><!--[--><!--]--><!----><span>[Delta Format](./Delta Format.md)</span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#下例是一个监听共享文本变化的示例" class="router-link-active router-link-exact-active sidebar-item" aria-label="下例是一个监听共享文本变化的示例："><!--[--><!--]--><!----><span>下例是一个监听共享文本变化的示例：</span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#y-textevent-api" class="router-link-active router-link-exact-active sidebar-item" aria-label="Y.TextEvent API"><!--[--><!--]--><!----><span>Y.TextEvent API</span><!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#y-xmlfragment" class="router-link-active router-link-exact-active sidebar-item" aria-label="Y.XmlFragment"><!--[--><!--]--><!----><span>Y.XmlFragment</span><!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#api-3" class="router-link-active router-link-exact-active sidebar-item" aria-label="API"><!--[--><!--]--><!----><span>API</span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#以下是一个监听y-xmlfragment变化的示例" class="router-link-active router-link-exact-active sidebar-item" aria-label="以下是一个监听Y.XmlFragment变化的示例:"><!--[--><!--]--><!----><span>以下是一个监听Y.XmlFragment变化的示例:</span><!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/posts/documents/yjs.js/Shared%20Types.html#y-xmlevent-api" class="router-link-active router-link-exact-active sidebar-item" aria-label="Y.XmlEvent API"><!--[--><!--]--><!----><span>Y.XmlEvent API</span><!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/zh/posts/documents/yjs.js/Delta%20Format.html" class="sidebar-item" aria-label="Delta Format"><!--[--><!--]--><!----><span>Delta Format</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/yjs.js/Y.Event.html" class="sidebar-item" aria-label="Y.Event"><!--[--><!--]--><!----><span>Y.Event</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/yjs.js/Y.UndoManager.html" class="sidebar-item" aria-label="Y.UndoManager"><!--[--><!--]--><!----><span>Y.UndoManager</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/yjs.js/Document%20Updates.html" class="sidebar-item" aria-label="Document Updates"><!--[--><!--]--><!----><span>Document Updates</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/yjs.js/y-protocol%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0.html" class="sidebar-item" aria-label="y-protocol源码学习"><!--[--><!--]--><!----><span>y-protocol源码学习</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/yjs.js/y-websocket%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0.html" class="sidebar-item" aria-label="y-websocket源码学习"><!--[--><!--]--><!----><span>y-websocket源码学习</span><!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">react-dnd <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/zh/posts/documents/reactDnd/%E4%BB%8B%E7%BB%8D.html" class="sidebar-item" aria-label="介绍"><!--[--><!--]--><!----><span>介绍</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/reactDnd/%E6%A6%82%E8%A7%88.html" class="sidebar-item" aria-label="概览"><!--[--><!--]--><!----><span>概览</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/reactDnd/%E7%BB%84%E4%BB%B6.html" class="sidebar-item" aria-label="组件"><!--[--><!--]--><!----><span>组件</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/reactDnd/hooks.html" class="sidebar-item" aria-label="hooks"><!--[--><!--]--><!----><span>hooks</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/reactDnd/Monitoring%20State.html" class="sidebar-item" aria-label="Monitoring State.md"><!--[--><!--]--><!----><span>Monitoring State.md</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/reactDnd/backend.html" class="sidebar-item" aria-label="backend"><!--[--><!--]--><!----><span>backend</span><!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">MUI Systom <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/zh/posts/documents/MUI%20System/%E8%B5%B7%E6%AD%A5.html" class="sidebar-item" aria-label="起步"><!--[--><!--]--><!----><span>起步</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/MUI%20System/%E7%94%A8%E6%B3%95.html" class="sidebar-item" aria-label="用法"><!--[--><!--]--><!----><span>用法</span><!--[--><!--]--></a><!----></li><li><a href="/zh/posts/documents/MUI%20System/The%20sx%20prop.html" class="sidebar-item" aria-label="The sx prop"><!--[--><!--]--><!----><span>The sx prop</span><!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><div class="page-content"><!--[--><main class="page"><!--[--><div class="article-header" style=""><!----><div class="article-header-content"><!----><h1 class="article-title">Shared Types</h1><!----><div class="article-icons"><div class="article-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"/></svg><span>Align</span></div><div class="article-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M400 64h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zm-6 400H54c-3.3 0-6-2.7-6-6V160h352v298c0 3.3-2.7 6-6 6z"/></svg><span>2023-08-16</span></div><div class="article-icon"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="0 0 24 24" fill="currentColor"><path fill="none" d="M0 0h24v24H0z"/><path d="M17.618 5.968l1.453-1.453 1.414 1.414-1.453 1.453a9 9 0 11-1.414-1.414zM12 20a7 7 0 100-14 7 7 0 000 14zM11 8h2v6h-2V8zM8 1h8v2H8V1z"/></svg><span>14 min</span></div></div></div><!----></div><!--[--><!--]--><!--]--><div class="theme-gungnir-content"><!--[--><!--]--><div><h1 id="共享类型" tabindex="-1"><a class="header-anchor" href="#共享类型" aria-hidden="true">#</a> 共享类型</h1><p>之前说过要使数据能被yjs处理就必须遵守yjs数据的规范，共享类型就是yjs提供的天然支持这些规范的数据格式，文档数据的结构应当基于这些数据类型来构建。</p><h2 id="y-map" tabindex="-1"><a class="header-anchor" href="#y-map" aria-hidden="true">#</a> Y.Map</h2><p><em>提供与map类型相似的公共</em></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">Y</span> <span class="token keyword">from</span> <span class="token string">&#39;yjs&#39;</span>

<span class="token comment">//创建文档</span>
<span class="token keyword">const</span> ydoc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Y<span class="token punctuation">.</span>Doc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Y.Map(下简称map或共享map)可以定义为顶层或者嵌套的类型</span>

<span class="token comment">// Method 1: 在文档顶级，定义一个共享map</span>
<span class="token keyword">const</span> ymap <span class="token operator">=</span> ydoc<span class="token punctuation">.</span><span class="token function">getMap</span><span class="token punctuation">(</span><span class="token string">&#39;my map type&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// Method 2: 创建一个 共享map</span>
<span class="token keyword">const</span> ymapNested <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Y<span class="token punctuation">.</span>Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 将共享map存到ymap中</span>
ymap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;my nested map&#39;</span><span class="token punctuation">,</span> ymapNested<span class="token punctuation">)</span>

<span class="token comment">// 常用方法</span>
ymap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;prop-name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span> <span class="token comment">// 值可以是json</span>
ymap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;prop-name&#39;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &#39;value&#39;</span>
ymap<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&#39;prop-name&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h3><p><strong>ymap.doc: Y.Doc | null</strong> (readonly)</p><p>当前map绑定到的文档对象，未绑定时为null</p><p><strong>ymap.parent: Y.AbstractType | null</strong></p><p>当前map的父级，如果当前map在文档的顶级则该值为null</p><p><strong>ymap.set(key: string, value: object|boolean|string|number|Uint8Array|Y.AbstractType)</strong></p><p>设置值，值类型可以是shared type, Uint8Array, JSON-encodable.</p><p><strong>ymap.get(key: string): object|boolean|Array|string|number|Uint8Array|Y.AbstractType</strong></p><p>获取map值</p><p><strong>ymap.delete(key: string)</strong></p><p>删除</p><p><strong>ymap.has(key: string): boolean</strong></p><p>判断map中是否存在某值</p><p><strong>ymap.toJSON(): Object&lt;string,object|boolean|Array|string|number|Uint8Array&gt;</strong></p><p>将当前map转换成JSON对象</p><p><strong>ymap.size: number</strong></p><p>返回键值对的个数</p><p><strong>ymap.forEach(value: any, key: string, map: Y.Map)</strong></p><p>对每个键值对调用提供的函数</p><p><strong>ymap[Symbol.Iterator]: Iterator</strong></p><p>返回一个成员为[key, value]数组的迭代器. 允许你使用for ... of ...循环迭代数据，比如: for (const [key, value] of ymap) { .. }</p><p><strong>ymap.entries(): Iterator</strong></p><p>返回一个成员为[key, value]数组的迭代器(和上面的有啥区别官方也没说)</p><p><strong>ymap.values(): Iterator</strong></p><p>返回一个只包含值的迭代器. 这允许你只迭代值: (const value of ymap.values()) { ... }，或者将所有的值转换成一个数组: Array.from(ymap.values()).</p><p><strong>ymap.keys(): Iterator</strong></p><p>和上边的一样，不过是只返回键。</p><p><strong>ymap.clone(): Y.Map</strong></p><p>克隆一个新的共享map</p><p><strong>ymap.observe(function(YMapEvent, Transaction))</strong></p><p>对当前map添加一个监听事件回调，每次map被改变时都会同步 触发该监听。如果在监听回调中修改了map，则执行完当前回调后将会再次触发该事件。</p><p><strong>ymap.unobserve(function)</strong></p><p>注销添加的事件监听回调</p><p><strong>ymap.observeDeep(function(Array&lt;Y.Event&gt;, Transaction))</strong></p><p>创建一个绑定一个深层监听函数。map下的其他共享类型被修改时同样会触发回调执行。如果在监听回调中修改了map，则执行完当前回调后将会再次触发该事件。 同时参数中会接收到自身包括子元素的事件。</p><p><strong>ymap.unobserveDeep(function)</strong></p><p>注销添加的深层监听回调</p><h3 id="通过一个示例来了解observe的使用" tabindex="-1"><a class="header-anchor" href="#通过一个示例来了解observe的使用" aria-hidden="true">#</a> 通过一个示例来了解observe的使用</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>ymap<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token parameter">ymapEvent</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//获取触发对象</span>
  ymapEvent<span class="token punctuation">.</span>target <span class="token operator">===</span> ymap <span class="token comment">// =&gt; true</span>

  <span class="token comment">// 获取修改的数据</span>
  <span class="token comment">// 方法一</span>
  ymapEvent<span class="token punctuation">.</span>keysChanged <span class="token comment">// =&gt; Set&lt;strings&gt;</span>
  <span class="token comment">// 方法二</span>
  ymapEvent<span class="token punctuation">.</span>changes<span class="token punctuation">.</span>keys <span class="token comment">// =&gt; Map&lt;string, { action: &#39;add&#39;|&#39;update&#39;|&#39;delete&#39;, oldValue: any}&gt;</span>

  <span class="token comment">// sample code.</span>
  ymapEvent<span class="token punctuation">.</span>changes<span class="token punctuation">.</span>keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">change<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>change<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">&#39;add&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Property &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; was added. Initial value: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ymap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>change<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">&#39;update&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Property &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; was updated. New value: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ymap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;. Previous value: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>change<span class="token punctuation">.</span>oldValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>change<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">&#39;delete&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Property &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; was deleted. New value: undefined. Previous value: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>change<span class="token punctuation">.</span>oldValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

ymap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; Property &quot;key&quot; was added. Initial value: &quot;value&quot;.</span>
ymap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;new&#39;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; Property &quot;key&quot; was updated. New value: &quot;new&quot;. Previous value: &quot;value&quot;.</span>
ymap<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; Property &quot;key&quot; was deleted. New value: undefined. Previous Value: &quot;new&quot;.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="y-mapevent-api" tabindex="-1"><a class="header-anchor" href="#y-mapevent-api" aria-hidden="true">#</a> Y.MapEvent API</h3><p><strong>ymapEvent.keysChanged: Set<code>&lt;string&gt;</code></strong></p><p>包含了在一个事务中所有值被修改了的键的Set</p><p>其他的API都继承自<a href="https://docs.yjs.dev/api/y.event" target="_blank" rel="noopener noreferrer">Y.Event</a></p><h2 id="y-array" tabindex="-1"><a class="header-anchor" href="#y-array" aria-hidden="true">#</a> Y.Array</h2><p>以类似序列的结构存储类型的共享数据。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">Y</span> <span class="token keyword">from</span> <span class="token string">&#39;yjs&#39;</span>

<span class="token keyword">const</span> ydoc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Y<span class="token punctuation">.</span>Doc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Y.Array可以定义为顶级类型或者嵌套类型</span>

<span class="token comment">// 在doc中定义一个顶级Array类型</span>
<span class="token keyword">const</span> yarray <span class="token operator">=</span> ydoc<span class="token punctuation">.</span><span class="token function">getArray</span><span class="token punctuation">(</span><span class="token string">&#39;my array type&#39;</span><span class="token punctuation">)</span> 
<span class="token comment">// 新建一个共享Array类型</span>
<span class="token keyword">const</span> yarrayNested <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Y<span class="token punctuation">.</span>Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 插入到其他共享类型中</span>
yarray<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;my nested array&#39;</span><span class="token punctuation">,</span> yarrayNested<span class="token punctuation">)</span>

<span class="token comment">// 常用方法</span>
yarray<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// insert three elements</span>
yarray<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// delete second element </span>
yarray<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [1, 3]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="api-1" tabindex="-1"><a class="header-anchor" href="#api-1" aria-hidden="true">#</a> API</h3><p><strong>Y.Array.from(Array&lt;JSON | Uint8Array | Y.AbstractType&gt;): Y.Array</strong></p><p>根据现有数据创建数组</p><p><strong>yarray.doc: Y.Doc | null</strong> (readonly)</p><p>当前数组绑定的文档对象，未绑定时为null</p><p><strong>yarray.parent: Y.AbstractType | null</strong></p><p>当前array的父元素。当前array为顶层类型时该属性为null</p><p><strong>yarray.insert(index: number, content: Array&lt;JSON | Uint8Array | Y.AbstractType&gt;)</strong></p><p>在指定索引插入内容。出于性能考虑插入的内容应该时个数组，例如在下标0处插入数字1: <code>yarray.insert(0, [1])</code></p><p><strong>yarray.delete(index: number, length: number)</strong></p><p>从索引开始删除length个数个数据</p><p><strong>yarray.push(content: Array&lt;JSON | Uint8Array | Y.AbstractType&gt;)</strong></p><p>从数组尾部推入数据，类似于<code>yarray.insert(yarray.length, content)</code></p><p><strong>yarray.unshift(content: Array&lt;JSON | Uint8Array | Y.AbstractType&gt;)</strong></p><p>从数组头部插入元素，类似于<code>yarray.insert(0, content)</code></p><p><strong>yarray.get(index: number): JSON | Uint8Array | Y.AbstractType</strong></p><p>Retrieve the n-th element.</p><p><strong>yarray.slice([start: number [, end: number]]): Array&lt;JSON | Uint8Array | Y.AbstractType&gt;</strong></p><p>返回<code>start</code>(包括)到<code>end</code>(不包括)。负值可用于表示从末尾开始，例如获取最后一个元素<code>yarray.slice(-1)</code>;获取最后一个元素外的所有元素<code>yarray.slice(0, -1)</code></p><p><strong>yarray.toJSON(): Array&lt;JSON | Uint8Array&gt;</strong></p><p>获取当前共享array的json格式数据。得到的返回值是一个包含所有元素的新数组，数组内部的共享类型同样会调用自身的toJSON方法转换为json格式。注意结果可能包含不可json编码的Uint8Arrays格式。</p><p><strong>yarray.forEach(function(value: any, index: number, yarray: Y.Array))</strong></p><p>对每个元素调用函数。可以理解成js数组的forEach</p><p><strong>yarray.map(function(value: any, index: number, yarray: Y.Array): T): Array</strong></p><p>对每个元素调用函数并将返回值作为一个数组返回。可以理解成js数组的map</p><p><strong>yarray[Symbol.Iterator]: Iterator</strong></p><p>返回共享数组的迭代器，可以通过for...of...迭代<code>for (const value of yarray) { .. }</code></p><p><strong>yarray.clone(): Y.Array</strong></p><p>克隆当前共享数组。</p><p><strong>yarray.observe(function(YArrayEvent, Transaction))</strong></p><p>添加监听，和上述的Y.Map的observe一致。</p><p><strong>yarray.unobserve(function)</strong></p><p>参考上述Y.Map</p><p><strong>yarray.observeDeep(function(Array&lt;Y.Event&gt;, Transaction))</strong></p><p>参考上述Y.Map</p><p><strong>yarray.unobserveDeep(function)</strong></p><h3 id="通过一个示例来了解observe的使用-1" tabindex="-1"><a class="header-anchor" href="#通过一个示例来了解observe的使用-1" aria-hidden="true">#</a> 通过一个示例来了解observe的使用</h3><p>yjs使用基于delta format(增量数据格式)的数据来描述数组的变化，这种数据格式是一个数组，delta format以及Y.ArrayEvent的详细信息前往<a href="https://docs.yjs.dev/api/y.event#delta-format" target="_blank" rel="noopener noreferrer">Y.Event API</a>查看。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>yarray<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token parameter">yarrayEvent</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  yarrayEvent<span class="token punctuation">.</span>target <span class="token operator">===</span> yarray <span class="token comment">// =&gt; true</span>

  <span class="token comment">// Find out what changed: </span>
  <span class="token comment">// Log the Array-Delta Format to calculate the difference to the last observe-event</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>yarrayEvent<span class="token punctuation">.</span>changes<span class="token punctuation">.</span>delta<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

yarray<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [{ insert: [1, 2, 3] }]</span>
yarray<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// [{ retain: 2 }, { delete: 1 }]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>yarray<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [1, 2]</span>

<span class="token comment">// The delta-format is very useful when multiple changes</span>
<span class="token comment">// are performed in a single transaction</span>
ydoc<span class="token punctuation">.</span><span class="token function">transact</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  yarray<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;b&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  yarray<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// deletes &#39;b&#39; and 2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [{ retain: 1 }, { insert: [&#39;a&#39;] }, { delete: 1 }]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>yarray<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [1, &#39;a&#39;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="y-text" tabindex="-1"><a class="header-anchor" href="#y-text" aria-hidden="true">#</a> Y.Text</h2><p>一种描述文本和富文本类型的共享类型。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">Y</span> <span class="token keyword">from</span> <span class="token string">&#39;yjs&#39;</span>

<span class="token keyword">const</span> ydoc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Y<span class="token punctuation">.</span>Doc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// You can define a Y.Text as a top-level type or a nested type</span>

<span class="token comment">// Method 1: Define a top-level type</span>
<span class="token keyword">const</span> ytext <span class="token operator">=</span> ydoc<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token string">&#39;my text type&#39;</span><span class="token punctuation">)</span> 
<span class="token comment">// Method 2: Define Y.Text that can be included into the Yjs document</span>
<span class="token keyword">const</span> ytextNested <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Y<span class="token punctuation">.</span>Text</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Nested types can be included as content into any other shared type</span>
ydoc<span class="token punctuation">.</span><span class="token function">getMap</span><span class="token punctuation">(</span><span class="token string">&#39;another shared structure&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;my nested text&#39;</span><span class="token punctuation">,</span> ytextNested<span class="token punctuation">)</span>

<span class="token comment">// Common methods</span>
ytext<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;abc&#39;</span><span class="token punctuation">)</span> <span class="token comment">// insert three elements</span>
ytext<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">bold</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// delete second element </span>
ytext<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &#39;abc&#39;</span>
ytext<span class="token punctuation">.</span><span class="token function">toDelta</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [{ insert: &#39;a&#39; }, { insert: &#39;bc&#39;, attributes: { bold: true }}]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="api-2" tabindex="-1"><a class="header-anchor" href="#api-2" aria-hidden="true">#</a> API</h3><p><strong>ytext = new Y.Text(initialContent): Y.Text</strong></p><p>使用现有内容创建。</p><p><strong>ytext.doc: Y.Doc | null</strong> (readonly)</p><p>当前类型绑定到的文档对象</p><p><strong>ytext.parent: Y.AbstractType | null</strong>(readonly)</p><p>当前类型的父节点</p><p><strong>ytext.length: number</strong>(readonly)</p><p>文本长度</p><p><strong>ytext.insert(index: number, content: string[, format: Object&lt;string,any&gt;])</strong></p><p>在指定位置插入文本。可通过format来设置一些属性。如果不设置属性默认会采用之前文本的属性。</p><p><strong>ytext.format(index: number, length: number, format: Object&lt;string,any&gt;)</strong></p><p>对文本应用属性</p><p><strong>ytext.applyDelta(delta: Delta)</strong></p><p>将德尔塔文本应用到文本</p><p><strong>ytext.delete(index: number, length: number)</strong></p><p>删除从指定索引开始长度为length的文本</p><p><strong>ytext.toString(): string</strong></p><p>将Y.Text转换成不带属性的纯文本</p><p><strong>ytext.toDelta(): Delta</strong></p><p>将共享文本转化为德尔塔格式，转换后的德尔塔格式和Quill富文本编辑器的一致。</p><p><strong>ytext.toJSON(): string</strong></p><p>将共享文本转换为json格式</p><p><strong>ytext.clone(): Y.Text</strong></p><p>克隆当前共享文本</p><p><strong>ytext.observe(function(YTextEvent, Transaction))</strong></p><p>添加加监听</p><p><strong>ytext.unobserve(function)</strong></p><p>注销监听</p><p><strong>ytext.observeDeep(function(Array&lt;Y.Event&gt;, Transaction))</strong></p><p>添加深层监听</p><p><strong>ytext.unobserveDeep(function)</strong></p><h3 id="delta-format-delta-format-md" tabindex="-1"><a class="header-anchor" href="#delta-format-delta-format-md" aria-hidden="true">#</a> [Delta Format](./Delta Format.md)</h3><h3 id="下例是一个监听共享文本变化的示例" tabindex="-1"><a class="header-anchor" href="#下例是一个监听共享文本变化的示例" aria-hidden="true">#</a> 下例是一个监听共享文本变化的示例：</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>yarray<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token parameter">yarrayEvent</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  yarrayEvent<span class="token punctuation">.</span>target <span class="token operator">===</span> yarray <span class="token comment">// =&gt; true</span>

  <span class="token comment">// Find out what changed: </span>
  <span class="token comment">// Option 1: A set of keys that changed</span>
  ymapEvent<span class="token punctuation">.</span>keysChanged <span class="token comment">// =&gt; Set&lt;strings&gt;</span>
  <span class="token comment">// Option 2: Compute the differences</span>
  ymapEvent<span class="token punctuation">.</span>changes<span class="token punctuation">.</span>keys <span class="token comment">// =&gt; Map&lt;string, { action: &#39;add&#39;|&#39;update&#39;|&#39;delete&#39;, oldValue: any}&gt;</span>
  
  <span class="token comment">// sample code.</span>
  yarrayEvent<span class="token punctuation">.</span>changes<span class="token punctuation">.</span>keys<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">change<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>change<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">&#39;add&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Property &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; was added. Initial value: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ymap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>change<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">&#39;update&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Property &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; was updated. New value: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ymap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;. Previous value: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>change<span class="token punctuation">.</span>oldValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>change<span class="token punctuation">.</span>action <span class="token operator">===</span> <span class="token string">&#39;delete&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Property &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; was deleted. New value: undefined. Previous value: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>change<span class="token punctuation">.</span>oldValue<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

ymap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; Property &quot;key&quot; was added. Initial value: &quot;value&quot;.</span>
ymap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;new&#39;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; Property &quot;key&quot; was updated. New value: &quot;new&quot;. Previous value: &quot;value&quot;.</span>
ymap<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&#39;key&#39;</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; Property &quot;key&quot; was deleted. New value: undefined. Previous Value: &quot;new&quot;.</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="y-textevent-api" tabindex="-1"><a class="header-anchor" href="#y-textevent-api" aria-hidden="true">#</a> Y.TextEvent API</h3><p>继承自<a href="/zh/posts/documents/yjs.js/Y.Event.html" class="">Y.Event</a></p><h2 id="y-xmlfragment" tabindex="-1"><a class="header-anchor" href="#y-xmlfragment" aria-hidden="true">#</a> Y.XmlFragment</h2><p><strong>一种用来管理Y.Xml类型集合的共享类型。</strong></p><p>xml和json一样是一种共享数据的格式，微软的office文档就是使用xml格式表示的。同时由于xml格式类似于html文本，所以可以直接在浏览器上显示或者转换为浏览器dom，比如下面这个示例：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">Y</span> <span class="token keyword">from</span> <span class="token string">&#39;yjs&#39;</span>

<span class="token keyword">const</span> ydoc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Y<span class="token punctuation">.</span>Doc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// You can define a Y.XmlFragment as a top-level type or a nested type</span>

<span class="token comment">// Method 1: Define a top-level type</span>
<span class="token keyword">const</span> yxmlFragment <span class="token operator">=</span> ydoc<span class="token punctuation">.</span><span class="token function">getXmlFragment</span><span class="token punctuation">(</span><span class="token string">&#39;my xml fragment&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// Method 2: Define Y.XmlFragment that can be included into the Yjs document</span>
<span class="token keyword">const</span> yxmlNested <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Y<span class="token punctuation">.</span>XmlFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Common methods</span>
<span class="token keyword">const</span> yxmlText <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Y<span class="token punctuation">.</span>XmlText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//Y.XmlFragment插入元素需要通过数组插入</span>
yxmlFragment<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>yxmlText<span class="token punctuation">]</span><span class="token punctuation">)</span>
yxmlFragment<span class="token punctuation">.</span>firstChild <span class="token operator">===</span> yxmlText
yxmlFragment<span class="token punctuation">.</span><span class="token function">insertAfter</span><span class="token punctuation">(</span>yxmlText<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Y<span class="token punctuation">.</span>XmlElement</span><span class="token punctuation">(</span><span class="token string">&#39;node-name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
yxmlFragment<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">===</span> yxmlText <span class="token comment">// =&gt; true</span>

<span class="token comment">//show result in dev console</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>yxmlFragment<span class="token punctuation">.</span><span class="token function">toDOM</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="api-3" tabindex="-1"><a class="header-anchor" href="#api-3" aria-hidden="true">#</a> API</h3><p><strong>yxmlFragment.doc: Y.Doc | null</strong>(readonly)</p><p><strong>yxmlFragment.parent: Y.AbstractType | null</strong></p><p><strong>yxmlFragment.firstChild: Y.XmlElement | Y.XmlText | null</strong></p><p>第一个子元素</p><p><strong>yxmlFragment.length: number</strong></p><p>子元素个数</p><p><strong>yxmlFragment.insert(index: number, content: Array&lt;Y.XmlElement | Y.XmlText&gt;)</strong></p><p><strong>yxmlFragment.insertAfter(ref: Y.XmlElement | Y.XmlText | null, content: Array&lt;Y.XmlElement | Y.XmlText&gt;)</strong></p><p>在指定引用的元素后插入元素，需要注意的是如果引用(ref)为空那个将会在开始插入元素。</p><p><strong>yxmlFragment.delete(index: number, length: number)</strong></p><p>同Y.Array</p><p><strong>yxmlFragment.push(content: Array&lt;Y.XmlElement | Y.XmlText&gt;)</strong></p><p>同Y.Array</p><p><strong>yxmlFragment.unshift(content: Array&lt;Y.XmlElement | Y.XmlText&gt;)</strong></p><p>同Y.Array</p><p><strong>yxmlFragment.get(index: number): Y.XmlElement | Y.XmlText</strong></p><p><strong>yxmlFragment.slice([start: number [, end: number]]): Array&lt;Y.XmlElement | Y.XmlText&gt;</strong></p><p>同Y.Array</p><p><strong>yxmlFragment.toJSON(): String</strong></p><p>转化为json格式。返回的结果是串联的xml字符串:</p><p><code>&lt;element1&gt;foo&lt;/element1&gt;&lt;element2&gt;bar&lt;/element2&gt;</code></p><p>If the fragment contains more than one XML element, the output will not be a valid XML; It will need to be placed inside a container element to be valid and parsable.(如果片段内包含多个xml元素，那么返回值将不是一个合法的XML结构。需要将其包裹子在一个元素中才能正常解析):</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> validDocument <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;wrapper&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>yXmlFragment<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/wrapper&gt;</span><span class="token template-punctuation string">`</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>yxmlFragment.createTreeWalker(filter: function(yxml: Y.XmlElement | Y.XmlText): boolean): Iterable</strong></p><p>该函数会遍历所有后代(不仅仅是直接子代)，并调用filter方法执行过滤，最后返回满足过滤条件的元素的迭代器。比如过滤出所有的p节点:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Log all &lt;p&gt; nodes that are children of this Y.XmlFragment</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> paragraph <span class="token keyword">of</span> yxmlFragment<span class="token punctuation">.</span><span class="token function">createTreeWalker</span><span class="token punctuation">(</span><span class="token parameter">yxml</span> <span class="token operator">=&gt;</span> yxml<span class="token punctuation">.</span>nodeName <span class="token operator">===</span> <span class="token string">&#39;p&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>yxmlFragment.clone(): Y.XmlFragment</strong></p><p><strong>toDOM():DocumentFragment</strong></p><p>转换为DOM节点</p><p><strong>yxmlFragment.observe(function(Y.XmlEvent, Transaction))</strong></p><p><strong>yxmlFragment.unobserve(function)</strong></p><p><strong>yxmlFragment.observeDeep(function(Array&lt;Y.Event&gt;, Transaction))</strong></p><p><strong>yxmlFragment.unobserveDeep(function)</strong></p><h3 id="以下是一个监听y-xmlfragment变化的示例" tabindex="-1"><a class="header-anchor" href="#以下是一个监听y-xmlfragment变化的示例" aria-hidden="true">#</a> 以下是一个监听Y.XmlFragment变化的示例:</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>yxmlFragment<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span><span class="token parameter">yxmlElent</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  yxmlEvent<span class="token punctuation">.</span>target <span class="token operator">===</span> yarray <span class="token comment">// =&gt; true</span>

  <span class="token comment">// Observe when child-elements are added or deleted. </span>
  <span class="token comment">// Log the Xml-Delta Format to calculate the difference to the last observe-event</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>yxmlEvent<span class="token punctuation">.</span>changes<span class="token punctuation">.</span>delta<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

yxmlFragment<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">Y<span class="token punctuation">.</span>XmlText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; [{ insert: [yxmlText] }]</span>
yxmlFragment<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// [{ delete: 1 }]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="y-xmlevent-api" tabindex="-1"><a class="header-anchor" href="#y-xmlevent-api" aria-hidden="true">#</a> Y.XmlEvent API</h3><p>继承自<a href="/zh/posts/documents/yjs.js/Y.Event.html" class="">Y.Event</a></p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg><a class="external-link meta-item-label" href="https://github.com/Renovamen/vuepress-theme-gungnir/edit/main/docs/zh/posts/documents/yjs.js/Shared Types.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--><!----><span>在 GitHub 上编辑此页</span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/zh/posts/documents/yjs.js/Y.Doc.html" class="" aria-label="Y.Doc"><!--[--><!--]--><!----><span>Y.Doc</span><!--[--><!--]--></a></span><span class="next"><a href="/zh/posts/documents/yjs.js/Delta%20Format.html" class="" aria-label="Delta Format"><!--[--><!--]--><!----><span>Delta Format</span><!--[--><!--]--></a></span></p></nav><!--[--><!--]--><!----></main><!--]--></div><div class="search-page" role="search"><span class="search-close"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 448 512" width="28" height="28" fill="currentColor"><path d="M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z"></path></svg></span><div class="gungnir-search-box"><input placeholder="$ grep ..." autocomplete="off" spellcheck="false" value><!----></div></div><div class="menu-btn-container"><div class="menu-btn-wrapper"><div class="menu-btn"><div style="" class="menu-btn-icon"><span></span><span></span><span></span></div><div style="display:none;" class="menu-text">0</div><svg class="menu-progress"><circle class="menu-border" cx="50%" cy="50%" r="48%" style="stroke-dasharray:0% 314.15926%;"></circle></svg></div><div class="menu-btn-child-wrapper"><div title="切换颜色模式" class="menu-btn-child"><svg class="ov-icon" style="font-size:1.2em;display:none;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"/></svg><svg class="ov-icon" style="font-size:1.2em;display:none;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 00283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"/></svg><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-43.52 -43.52 599.04 599.04" fill="currentColor"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"/></svg></div><div class="menu-btn-child"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/></svg></div><div class="menu-btn-child"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-75.52 -43.52 599.04 599.04" fill="currentColor"><path d="M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"/></svg></div><!----><div class="toggle-sidebar-button menu-btn-child menu-btn-sidebar" title="切换侧边栏" aria-expanded="false" role="button" tabindex="0"><svg class="ov-icon" style="font-size:1.2em;" aria-hidden="true" width="19.2" height="19.2" viewbox="-1.6 -1.6 19.2 19.2" fill="currentColor"><path d="M14 2a1 1 0 011 1v10a1 1 0 01-1 1H2a1 1 0 01-1-1V3a1 1 0 011-1h12zM2 1a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V3a2 2 0 00-2-2H2z"/><path d="M3 4a1 1 0 011-1h2a1 1 0 011 1v8a1 1 0 01-1 1H4a1 1 0 01-1-1V4z"/></svg></div></div></div></div><!----></div><!--]--></div>
    <script type="module" src="/assets/app.544e4f17.js" defer></script>
  </body>
</html>
